
<!DOCTYPE html>
<html lang="fi">
<head>
<script>
  const ua = navigator.userAgent || '';
  const isLikelyWebView = (
    ua.includes('FBAN') || ua.includes('FBAV') ||       // Facebook, Instagram
    ua.includes('Line') ||                              // LINE
    ua.includes('wv') ||                                // Android WebView
    (window.navigator.standalone === false)             // iOS "web app" Safari
  );

  if (isLikelyWebView) {
    // Ohjataan oikeaan selaimeen
    alert("Avaa t√§m√§ sovellus tavallisessa selaimessa (esim. Chrome tai Firefox). Sinut ohjataan nyt oikeaan n√§kym√§√§n.");
    window.location.replace("https://kimkupiainen.github.io/ampumassa/index.html");
  }
</script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ampumap√§iv√§kirja</title>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js">
</script>
</head>
<body class="dark">
<div>
<header class="site-header">
  <div class="nav-container">
	<div class="brand">AMPUMASSA</div>
	<button class="menu-toggle" aria-label="Valikko">‚ò∞</button>
    <nav class="nav-links">
      <a href="index.html" class="active">Etusivu</a>
      <a href="tietosuojaseloste.html">Tietosuoja</a>
    </nav>
  </div>
</header>
</div>
<main>
  <h1><strong>AMPUMASSA</strong><br> Ampumap√§iv√§kirja netiss√§</h1>
  
  <div id="login"><button id="login-btn">Kirjaudu Google-tilill√§</button></div>
<div id="intro">
  <p>
    <strong>AMPUMASSA</strong> on henkil√∂kohtainen ty√∂kalu ammuntojen seurantaan.
    Kirjaa yl√∂s p√§iv√§m√§√§r√§, ase, laukausm√§√§r√§t, paikka ja vapaamuotoiset huomiot jokaiselta ampumakerralta.
  </p>
  <p>
    Tiedot tallennetaan omaan Google Driveesi, ja niit√§ voi tarkastella sek√§ PDF-muodossa ett√§ selaimessa.
    Sovellus toimii my√∂s mobiililaitteilla, ja oppii automaattisesti aiemmin k√§ytetyt aseet ja paikat. Tietojasi ei ker√§t√§ sivuston hallinnoijan toimesta eik√§ luovuteta koskaan kolmansille osapuolille tarpeettomasti.
  </p>
</div>
	<form id="log-form" style="display:none">
	  <input type="date" id="date" required>
	  <input type="text" id="event" placeholder="Tapahtuma" required>

	  <select id="type" required>
		<option value="">Valitse asetyyppi</option>
		<option value="Pistooli">Pistooli</option>
		<option value="Kiv√§√§ri">Kiv√§√§ri</option>
		<option value="Haulikko">Haulikko</option>
		<option value="Pienoiskiv√§√§ri">Pienoiskiv√§√§ri</option>
		<option value="Muu">Muu</option>
	  </select>

	  <input list="calibers" id="caliber" placeholder="Kaliiperi (esim. 9mm, .22LR)" required>
	  <datalist id="calibers"></datalist>

	  <input list="weapons" id="weapon" placeholder="Ase / mallinimi" required>
	  <datalist id="weapons"></datalist>

	  <select id="tt" required>
		<option value="">Valitse toimintatapa</option>
		<option value="TT1">TT1 ‚Äì kertatuli ilman lipasta</option>
		<option value="TT2">TT2 ‚Äì kertatuli lippaalla</option>
		<option value="TT3">TT3 ‚Äì itselataava kertatuli</option>
		<option value="TT4">TT4 ‚Äì sarjatuli</option>
	  </select>

	  <input list="locations" id="location" placeholder="Paikka" required>
	  <datalist id="locations"></datalist>

	  <input type="number" id="rounds" placeholder="Laukaukset" required>
	  <textarea id="notes" placeholder="Kuvaus / huomiot"></textarea>

	  <div>
		<button type="submit" class="save">Tallenna merkint√§</button>
		<button type="button" onclick="cancelEdit()">Peru muokkaus</button>
	  </div>
	  <div id="status"></div>
	</form>


	<div id="entries">
	  <div>
		<button id="load-entries" style="display:none">üìã N√§yt√§ merkinn√§t</button>
		<style>
  #export-pdf,
  #export-pistol-report {
    display: none;
  }
</style>
		<div id="report-dropdown" style="display: none; margin-top: 1em;">
  <label for="report-select"><strong>Valitse raportti:</strong></label>
  <select id="report-select">
    <option value="pistol-2v">2v pistooliraportti</option>
    <option value="all-1v">1v aktiivisuus (kaikki asetyypit)</option>
    <option value="all-2v">2v aktiivisuus (kaikki asetyypit)</option>
    <option value="last-month">Viimeisin kuukausi</option>
    <option value="custom">Valitse aikav√§li ja tyyppi...</option>
  </select>
  <button id="generate-report" class="pdf-button">Luo raportti</button>
</div>
	  </div>
	  <div id="entry-cards"></div> <!-- <- t√§m√§ lis√§ttiin -->
	</div>
	  <!-- Loader -->
	<div id="loader" style="display: none;">
	  <div class="spinner"></div>
	</div>

	<!-- Popup confirmation -->
	<div id="confirmation-popup" style="display: none;">
	  <div class="popup-content">
		<h3>Merkint√§ lis√§tty</h3>
		<div id="popup-details"></div>
		<button onclick="closeConfirmation()">OK</button>
	  </div>
	</div>

<script src="app.js" defer></script>
</main>
<footer id="app-footer">
  ¬© 2025 Kim Kupiainen ‚Äì Kaikki oikeudet pid√§tet√§√§n.
<br><button class="donation-button" onclick="window.open('https://qr.mobilepay.fi/box/844a12a5-3cd7-46da-a256-1d6954215f5f/pay-in', '_blank')">
  ‚òï Droppaa kahvirahaa
</button>
</footer>
<div id="global-loader" style="display:none;">
  <div class="global-loader-content">
    <div class="spinner"></div>
    <p>Haetaan merkint√∂j√§...</p>
  </div>
</div>
</body>
</html>
